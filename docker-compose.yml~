version: '3'

services:

        postgres_data:
                image: busybox
                volumes:
                        - /var/lib/postgresql/data
                container_name: postgrs-datastore

        
        db:
                image: postgres
                enviornment:
                        POSTGRES_USER: flask_question
                        POSTGRES_PASSWORD: beast1114514
                ports:
                        - "5432"
                container_name: portgres
                volumes:
                        - postgres-datastore
        
        web:
                build: .
                ports:
                        - "5000:5000"
                volumes:
                        - .:myapp
                depends_on:
                        - redis
                        - db
                networks:
                        - dns
        
        redis:
                image: redis


networks:
        
        dns:
                external: true
